<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Game</title>
    <link rel="stylesheet" href="style.css">
    <style>
        body { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        #gameCanvas { border: 3px solid #fff; background: #000; display: block; margin: 20px auto; }
        .back-btn { position: absolute; top: 20px; left: 20px; padding: 10px 20px; background: rgba(255,255,255,0.2); color: #fff; border: 2px solid #fff; border-radius: 10px; cursor: pointer; text-decoration: none; }
        .info { text-align: center; color: #fff; margin: 20px; }
    </style>
</head>
<body>
    <a href="index.html" class="back-btn">‚Üê Back</a>
    <canvas id="gameCanvas" width="800" height="600"></canvas>
    <div class="info">
        <h2 id="gameTitle">Dynamic Game</h2>
        <p id="gameDesc">Game Description</p>
        <p>Score: <span id="score">0</span></p>
    </div>
    <script>
        // Get game number from URL
        const urlParams = new URLSearchParams(window.location.search);
        const gameNum = parseInt(urlParams.get('n')) || 104;
        
        const templates = [
            {name: "Click", icon: "üéØ", desc: "Click the targets"},
            {name: "Shoot", icon: "üî´", desc: "Shoot the enemies"},
            {name: "Collect", icon: "üí∞", desc: "Collect items"},
            {name: "Avoid", icon: "‚ö†Ô∏è", desc: "Avoid obstacles"},
            {name: "Match", icon: "üîó", desc: "Match pairs"},
            {name: "Race", icon: "üèéÔ∏è", desc: "Race to finish"},
            {name: "Jump", icon: "ü¶ò", desc: "Jump platforms"},
            {name: "Puzzle", icon: "üß©", desc: "Solve puzzles"},
            {name: "Defend", icon: "üõ°Ô∏è", desc: "Defend base"},
            {name: "Attack", icon: "‚öîÔ∏è", desc: "Attack enemies"},
        ];
        
        const template = templates[gameNum % templates.length];
        document.getElementById('gameTitle').textContent = `${template.icon} ${template.name} Game #${gameNum}`;
        document.getElementById('gameDesc').textContent = template.desc;
        
        // Game code
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        let score = 0;
        const targets = [];
        let gameStarted = false;
        const gameType = gameNum % 10;

        function createTarget() {
            targets.push({
                x: Math.random() * (canvas.width - 40),
                y: Math.random() * (canvas.height - 40),
                width: 40,
                height: 40,
                active: true,
                color: `hsl(${Math.random() * 360}, 70%, 50%)`,
                speed: 1 + Math.random() * 2
            });
        }

        canvas.addEventListener('click', (e) => {
            if (!gameStarted) {
                gameStarted = true;
                for (let i = 0; i < 5; i++) createTarget();
                return;
            }
            
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            targets.forEach((target, index) => {
                if (target.active && x >= target.x && x <= target.x + target.width &&
                    y >= target.y && y <= target.y + target.height) {
                    target.active = false;
                    targets.splice(index, 1);
                    score += 10;
                    document.getElementById('score').textContent = score;
                    createTarget();
                }
            });
        });

        function update() {
            if (!gameStarted) return;
            
            targets.forEach(target => {
                target.x += (Math.random() - 0.5) * target.speed;
                target.y += (Math.random() - 0.5) * target.speed;
                target.x = Math.max(0, Math.min(canvas.width - target.width, target.x));
                target.y = Math.max(0, Math.min(canvas.height - target.height, target.y));
            });
        }

        function draw() {
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            if (!gameStarted) {
                ctx.fillStyle = '#fff';
                ctx.font = '30px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('Click to Start!', canvas.width/2, canvas.height/2);
                return;
            }
            
            targets.forEach(target => {
                if (target.active) {
                    ctx.fillStyle = target.color;
                    if (gameType % 2 === 0) {
                        ctx.fillRect(target.x, target.y, target.width, target.height);
                    } else {
                        ctx.beginPath();
                        ctx.arc(target.x + target.width/2, target.y + target.height/2, target.width/2, 0, Math.PI * 2);
                        ctx.fill();
                    }
                }
            });
        }

        function gameLoop() {
            update();
            draw();
            requestAnimationFrame(gameLoop);
        }
        gameLoop();
    </script>
</body>
</html>

